LabtainerLabDesignerUserGuideFullyprovisionedcybersecuritylabsOctober30,2020ThisdocumentwascreatedbyUnitedStatesGovernmentemployeesatTheCenterforCybersecurityandCyberOperations(C3O)attheNavalPostgraduateSchoolNPS.PleasenotethatwithintheUnitedStates,copyrightprotectionisnotavailableforanyworkscreatedbyUnitedStatesGovernmentemployees,pursuanttoTitle17UnitedStatesCodeSection105.Thisdocumentisinthepublicdomainandisnotsubjecttocopyright.
LabtainerLabDesignerUserGuideFullyprovisionedcybersecuritylabsOctober30,2020ThisdocumentwascreatedbyUnitedStatesGovernmentemployeesatTheCenterforCybersecurityandCyberOperations(C3O)attheNavalPostgraduateSchoolNPS.PleasenotethatwithintheUnitedStates,copyrightprotectionisnotavailableforanyworkscreatedbyUnitedStatesGovernmentemployees,pursuanttoTitle17UnitedStatesCodeSection105.Thisdocumentisinthepublicdomainandisnotsubjecttocopyright.
Contents1Introduction41.1BeneﬁtsofLabtainers.................................41.2ObtainingtheLabtainerdevelopmentkit......................51.3Contentofthisguide.................................52Overviewofthestudentenvironmentandworkﬂow53Creatingnewlabs73.1Createtheﬁrstlabcomputer............................73.2Testingthenewlab..................................73.3Multiplecontainers..................................94Deﬁningthelabexecutionenvironment94.1Dockerﬁles......................................94.2Containerdeﬁnitionsinstart.conﬁg.........................104.3Lab-speciﬁcﬁlesinthestudent’shomedirectory..................144.3.1Largeornumerousﬁlesinthehomedirectory...............144.4Lab-speciﬁcsystemﬁles...............................154.5Systemservices....................................154.6LabTextandInstructionsforStudents.......................164.7RunningprogramsinVirtualTerminals.......................174.8Finallabenvironmentﬁxup.............................174.9Persistentstorage...................................175Parameterizingalab185.1Parameterizationconﬁgurationﬁlesyntax.....................185.2Synchronizingstartupandparameterization....................205.3Parameterizingstart.conﬁg..............................205.4SimpleParameterizationforCheckingOwn-work.................205.5Debuggingparameterizing..............................216Automatedassessmentofstudentlabs216.1Artifactﬁles......................................216.1.1Capturingstdinandstdout.........................216.1.2Capturingprogramﬁleoutput........................226.1.3BashHistory.................................226.1.4Systemlogs..................................236.1.5Capturinginformationabouttheenvironment...............236.1.6Capturingﬁleaccessevents.........................236.1.7Generatingresultsuponstoppingthelab..................246.1.8Artifactarchives...............................246.2Artifactresultvalues.................................256.2.1Resultﬁeldvalues...............................256.2.2Convertingartifactﬁleformats.......................276.3Evaluatingresults...................................286.3.1Goaldeﬁnitions................................286.3.2Distinguishbetweenresultsgeneratedbeforeandafterconﬁgurationchanges316.3.3Replaceanswerswithhashes.........................316.3.4AssessmentReport..............................321
Contents1Introduction41.1BeneﬁtsofLabtainers.................................41.2ObtainingtheLabtainerdevelopmentkit......................51.3Contentofthisguide.................................52Overviewofthestudentenvironmentandworkﬂow53Creatingnewlabs73.1Createtheﬁrstlabcomputer............................73.2Testingthenewlab..................................73.3Multiplecontainers..................................94Deﬁningthelabexecutionenvironment94.1Dockerﬁles......................................94.2Containerdeﬁnitionsinstart.conﬁg.........................104.3Lab-speciﬁcﬁlesinthestudent’shomedirectory..................144.3.1Largeornumerousﬁlesinthehomedirectory...............144.4Lab-speciﬁcsystemﬁles...............................154.5Systemservices....................................154.6LabTextandInstructionsforStudents.......................164.7RunningprogramsinVirtualTerminals.......................174.8Finallabenvironmentﬁxup.............................174.9Persistentstorage...................................175Parameterizingalab185.1Parameterizationconﬁgurationﬁlesyntax.....................185.2Synchronizingstartupandparameterization....................205.3Parameterizingstart.conﬁg..............................205.4SimpleParameterizationforCheckingOwn-work.................205.5Debuggingparameterizing..............................216Automatedassessmentofstudentlabs216.1Artifactﬁles......................................216.1.1Capturingstdinandstdout.........................216.1.2Capturingprogramﬁleoutput........................226.1.3BashHistory.................................226.1.4Systemlogs..................................236.1.5Capturinginformationabouttheenvironment...............236.1.6Capturingﬁleaccessevents.........................236.1.7Generatingresultsuponstoppingthelab..................246.1.8Artifactarchives...............................246.2Artifactresultvalues.................................256.2.1Resultﬁeldvalues...............................256.2.2Convertingartifactﬁleformats.......................276.3Evaluatingresults...................................286.3.1Goaldeﬁnitions................................286.3.2Distinguishbetweenresultsgeneratedbeforeandafterconﬁgurationchanges316.3.3Replaceanswerswithhashes.........................316.3.4AssessmentReport..............................321
6.3.5Documentthemeaningofgoals.......................326.4Studentself-assessment................................336.4.1Currentstateassessment...........................336.5Currentstateartifacts................................336.6Assessmentexamples.................................346.6.1Didaprogramoutputanexpectedanswer?................346.6.2Doartifactﬁlescontainoneoftwospeciﬁcstrings?............346.6.3Comparevalueofaﬁeldfromaselectedlineinanartifactﬁle......346.6.4Wasalogentrywrittenwhilesomecommandexecuted?.........356.6.5Mydesiredartifactsarenotinstdinorstdout,theprogramoutputsaﬁle356.6.6Delimitingtimeusinglogﬁleentries....................356.6.7Delimitingtimeviaprograminvocations..................366.7Debuggingautomatedassessmentinlabs......................377Quizzes377.1TrueorFalse.....................................377.2Preface.........................................388Networking388.1NetworkTaps.....................................398.2RealisticNetworkRoutingandDNS........................398.3CommunicatingwithexternalhostsorVMs....................408.4Networkinterfaceassignments............................419Building,MaintainingandPublishingLabs419.1NPSDevelopmentOperations............................419.2Alternateregistryfortesting.............................429.3Largelabﬁles.....................................429.3.1Reuseoflargeﬁlesets............................439.4Packagesourcesforaptandyum..........................439.5Localesettings....................................439.6Labversions......................................449.7Creatingnewbaseimages..............................449.8Importinglabs:Warning!...............................4410LabtainerInstructorModules(IModules)4510.1Labtainersdistributionstrategy...........................4510.2Imoduledistributionstrategy............................4510.3TestingIModules...................................4610.4Customlabmanuals.................................4610.5Imoduleexamples...................................4710.5.1Modifyalabmanualforthetelnet-lab...................4710.5.2Createanewlab...............................4711RemoteaccessandcontrolofLabtainerexercises4811.1Remotemanagement.................................4911.1.1Filecopying..................................4911.1.2Clientandserversetup............................4911.2Remoteaccesstocontainers.............................5011.2.1RemoteaccesswithoutGNS3........................5011.2.2RemoteaccesswithGNS3..........................502
6.3.5Documentthemeaningofgoals.......................326.4Studentself-assessment................................336.4.1Currentstateassessment...........................336.5Currentstateartifacts................................336.6Assessmentexamples.................................346.6.1Didaprogramoutputanexpectedanswer?................346.6.2Doartifactﬁlescontainoneoftwospeciﬁcstrings?............346.6.3Comparevalueofaﬁeldfromaselectedlineinanartifactﬁle......346.6.4Wasalogentrywrittenwhilesomecommandexecuted?.........356.6.5Mydesiredartifactsarenotinstdinorstdout,theprogramoutputsaﬁle356.6.6Delimitingtimeusinglogﬁleentries....................356.6.7Delimitingtimeviaprograminvocations..................366.7Debuggingautomatedassessmentinlabs......................377Quizzes377.1TrueorFalse.....................................377.2Preface.........................................388Networking388.1NetworkTaps.....................................398.2RealisticNetworkRoutingandDNS........................398.3CommunicatingwithexternalhostsorVMs....................408.4Networkinterfaceassignments............................419Building,MaintainingandPublishingLabs419.1NPSDevelopmentOperations............................419.2Alternateregistryfortesting.............................429.3Largelabﬁles.....................................429.3.1Reuseoflargeﬁlesets............................439.4Packagesourcesforaptandyum..........................439.5Localesettings....................................439.6Labversions......................................449.7Creatingnewbaseimages..............................449.8Importinglabs:Warning!...............................4410LabtainerInstructorModules(IModules)4510.1Labtainersdistributionstrategy...........................4510.2Imoduledistributionstrategy............................4510.3TestingIModules...................................4610.4Customlabmanuals.................................4610.5Imoduleexamples...................................4710.5.1Modifyalabmanualforthetelnet-lab...................4710.5.2Createanewlab...............................4711RemoteaccessandcontrolofLabtainerexercises4811.1Remotemanagement.................................4911.1.1Filecopying..................................4911.1.2Clientandserversetup............................4911.2Remoteaccesstocontainers.............................5011.2.1RemoteaccesswithoutGNS3........................5011.2.2RemoteaccesswithGNS3..........................502
